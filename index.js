import{a as A,i as b,S as _}from"./assets/vendor-W_xo0hru.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const x="https://sound-wave.b.goit.study/api",O=8;async function V(t,e={}){try{const r=await A.get(t,{headers:{accept:"application/json",...e.headers},...e});if(!r.data)throw new Error(`HTTP error! status: ${r.status}`);return r.data}catch(r){throw console.error("Error fetching data:",r),r}}async function Y(t=1,e="",r="",s=""){try{const n=new URLSearchParams;n.append("page",t),n.append("limit",O),e.trim()&&n.append("name",e),r.trim()&&n.append("genre",r),s.trim()&&n.append("sortName",s),console.log(e);const o=await A.get(`${x}/artists`,{params:n});return o.data?o.data||[]:(console.error("Error: API returned no data"),[])}catch(n){throw console.error("Error:",n),n}}async function Z(t){try{const e=await A.get(`${x}/artists/${t}`,{});return e.data?e.data||{}:(console.error("Error: API returned no data"),{})}catch(e){throw console.error("Error:",e),e}}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".section#reviews"),e=document.querySelector(".feedback-swiper .swiper-wrapper"),r=document.querySelector(".custom-pagination");let s;if(!t||!e||!r){console.error("Required DOM elements not found:",{feedbackSection:t,swiperContainer:e,paginationContainer:r}),b.error({title:"Error",message:"Failed to initialize feedback section. Please check the HTML structure."});return}s=document.createElement("div"),s.className="loader",s.textContent="Loading...",t.appendChild(s);function n(a,i){let d;return function(...l){clearTimeout(d),d=setTimeout(()=>a.apply(this,l),i)}}function o(a){e.innerHTML="";const i=a.data||a;if(!Array.isArray(i)){console.error("No valid data array found:",a),b.error({title:"Error",message:"Failed to load feedback data. Invalid response format."});return}const d=Math.floor(Math.random()*8)+1;[i[0],i[d],i[9]].forEach((c,m)=>{const f=document.createElement("div");f.classList.add("swiper-slide","feedback-card");const U=Math.round(c.rating);f.innerHTML=`
        <div class="feedback-content">
          <div class="star-rating">
            <svg width="116" height="20" viewBox="0 0 116 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0)">
                ${u(U)}
              </g>
              <defs>
                <clipPath id="clip0">
                  <rect width="116" height="18.8889" fill="white"/>
                </clipPath>
              </defs>
            </svg>
          </div>
          <p class="comment">${c.descr}</p>
          <div class="user-info"><span class="user-name">${c.name}</span></div>
        </div>
      `,e.appendChild(f)}),r.innerHTML="";for(let c=0;c<3;c++){const m=document.createElement("div");m.classList.add("pagination-bullet"),m.setAttribute("data-index",c),c===0&&m.classList.add("active"),r.appendChild(m)}s.style.display="none"}function u(a){let i="";const d="M9.071 1.31791C9.41474 0.501451 10.5855 0.501452 10.9292 1.31791L12.958 6.1368C13.103 6.481 13.4307 6.71618 13.8068 6.74597L19.0728 7.16304C19.965 7.23371 20.3268 8.3337 19.647 8.90897L15.6349 12.3042C15.3483 12.5468 15.2231 12.9273 15.3107 13.2899L16.5365 18.3666C16.7441 19.2267 15.427 19.9066 15.0541 19.4457L10.5247 16.7251C10.2026 16.5308 9.79762 16.5308 9.4756 16.7251L4.96711 19.4457C4.20323 19.9066 3.25608 19.2267 3.46376 18.3666L4.68954 13.2899C4.7771 12.9273 4.65194 12.5468 4.36538 12.2942L0.353184 8.90897C-0.326596 8.3337 0.0351899 7.23371 0.927413 7.16304L6.19348 6.74597C6.56962 6.71618 6.89728 6.481 7.04219 6.1368L9.071 1.31794Z";for(let l=0;l<5;l++){const c=l*24;i+=`<path d="${d}" fill="${l<a?"#764191":"#fff"}" transform="translate(${c}, 0)"/>`}return i}s.style.display="block",V("https://sound-wave.b.goit.study/api/feedbacks?limit=10&page=1").then(a=>{console.log("API Response:",a),o(a);const i=new _(".feedback-swiper",{direction:"horizontal",loop:!0,navigation:{nextEl:".swiper-button-prev",prevEl:".swiper-button-next"},slidesPerView:1,spaceBetween:0});i.on("slideChange",()=>{const c=document.querySelectorAll(".pagination-bullet"),m=i.realIndex%3;c.forEach(f=>{f.classList.toggle("active",f.getAttribute("data-index")===m.toString())})});const d=document.querySelector(".swiper-button-next"),l=document.querySelector(".swiper-button-prev");d&&l&&(d.addEventListener("click",n(()=>i.slideNext(),300)),l.addEventListener("click",n(()=>i.slidePrev(),300)))}).catch(a=>{console.error("Fetch error:",a),s.style.display="none",b.error({title:"Error",message:"Failed to load feedback. Please try again later."})})});const I=document.querySelector(".burger-btn"),C=document.querySelector(".mobile-menu"),B=document.querySelector(".mobile-menu-close"),J=document.querySelectorAll(".mobile-nav-link"),Q=document.querySelectorAll(".nav-link"),W=document.querySelector(".page-header");I&&I.addEventListener("click",()=>{C.classList.add("is-open"),document.body.style.overflow="hidden"});B&&B.addEventListener("click",()=>{C.classList.remove("is-open"),document.body.style.overflow=""});function H(t){const e=document.querySelector(t);if(e){const r=W.offsetHeight,n=e.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:n,behavior:"smooth"})}}Q.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const r=e.currentTarget.getAttribute("href");H(r)})});J.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const r=e.currentTarget.getAttribute("href");H(r),C.classList.remove("is-open"),document.body.style.overflow=""})});function N(t,e){return typeof t!="string"?"":t.length>e?t.slice(0,e)+"...":t}const X=document.querySelectorAll(".artist-description"),ee=67;X.forEach(t=>{if(t){const e=N(t.textContent,ee);t.textContent=e}});const w=document.querySelector(".loader");function te(t){return`
    <ul class="artist-genre-list">
      ${t.map(e=>`<li class="artist-genre-item">${e}</li>`).join("")}
    </ul>
  `}function ne(t){return t.map(e=>`
    <li class="artist-item">
          <img class="artist-item-img" src="${e.strArtistThumb}" alt="${e.strArtist}">
          ${te(e.genres)}
          <p class="artist-name">${e.strArtist}</p>
          <p class="artist-description">${N(e.strBiographyEN,67)}</p>
          <button type="button" class="artist-learn-btn" data-id="${e._id}">Learn More
            <svg class="learn-btn-svg">
               <use href="/img/icons-svg.svg#icon-icon"></use>
            </svg>
          </button>
        </li>`).join("")}function re(){w.classList.add("is-active"),w.classList.remove("is-hidden")}function oe(){w.classList.add("is-hidden"),w.classList.remove("is-active")}function T(){g.classList.add("is-hidden"),g.classList.remove("is-active")}function se(){g.classList.remove("is-hidden"),g.classList.add("is-active")}const v=document.querySelector(".container-modal"),R=v.querySelector(".modal"),E=v.querySelector(".container-modal-1"),D=v.querySelector(".modal-close-btn"),q=document.getElementById("modalLoader");function F(t){t.key==="Escape"&&k()}function j(t){E.contains(t.target)||k()}async function ie(t){v.classList.add("is-open"),document.body.classList.add("modal-open"),q.style.display="block",E.style.display="none";const e=await Z(t);console.log(e),setTimeout(()=>{q.style.display="none",E.style.display="block",D.addEventListener("click",k),document.addEventListener("keydown",F),R.addEventListener("click",j)},1500)}function k(){v.classList.remove("is-open"),document.body.classList.remove("modal-open"),q.style.display="none",E.style.display="block",D.removeEventListener("click",k),document.removeEventListener("keydown",F),R.removeEventListener("click",j)}const y=document.querySelector(".artist-list"),g=document.querySelector(".artist-load-btn"),z=document.querySelector(".filters-input"),ae=document.querySelectorAll(".reset-btn-js"),ce=document.querySelector(".search-filters-btn"),le=document.querySelector(".js-form"),G=document.querySelector(".filters-dropdown-sort"),K=document.querySelector(".filters-dropdown-genre"),L=document.querySelector(".artist-empty");let p=1,$=0,S="",M="",P="";g.addEventListener("click",()=>h(!0));document.addEventListener("DOMContentLoaded",h);z.addEventListener("input",ue);ae.forEach(t=>{t.addEventListener("click",fe)});ce.addEventListener("click",()=>{le.classList.toggle("is-open")});G.addEventListener("change",me);K.addEventListener("change",pe);async function h(t=!1){re();try{const e=await Y(p,S,M,P),r=e.artists;r.length===0?(T(),y.classList.add("visually-hidden"),L.classList.remove("visually-hidden"),L.classList.add("is-active")):(se(),y.classList.remove("visually-hidden"),L.classList.add("visually-hidden"),L.classList.remove("is-active"));const s=ne(r);if(t){y.insertAdjacentHTML("beforeend",s);const o=document.querySelector(".artist-item");if(o){const u=o.getBoundingClientRect().height;window.scrollBy({top:u,behavior:"smooth"})}}else y.innerHTML=s;$=e.totalArtists,p*O>=$&&T(),p++}catch(e){console.error("Error loading artists:",e),b.error({message:"Something went wrong. Please try again later.",position:"topCenter"})}finally{oe()}}const de=document.querySelector(".artist-list");de.addEventListener("click",t=>{const e=t.target.closest(".artist-learn-btn");if(!e)return;const r=e.dataset.id;ie(r)});function ue(t){S=t.target.value.trim(),p=1,h(),console.log("name: "+S)}function me(t){P=t.target.value.trim(),p=1,h()}function pe(t){p=1,M=t.target.value.trim(),h()}function fe(t){p=1,S="",M="",P="",z.value="",G.value="",K.value="",h()}
//# sourceMappingURL=index.js.map
