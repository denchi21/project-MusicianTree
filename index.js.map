{"version":3,"file":"index.js","sources":["../src/js/basicAPI.js","../src/js/header.js","../src/js/artists.js","../src/js/render-functions.js","../src/js/modal.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport '../css/styles.css';\n\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api';\n\nexport const LIMIT = 8;\n\nexport async function fetchArtists(page = 1) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists`, {\n      params: {\n        page,\n        limit: LIMIT,\n      },\n    });\n\n    // Пeрeвіряем, щоо response.data існує\n    if (!response.data) {\n      console.error('Error: API returned no data');\n      return [];\n    }\n\n    return response.data || [];\n\n  } catch (error) {\n    console.error('Error:', error);\n    throw error\n  }\n}","const burgerBtn = document.querySelector('.burger-btn');\nconst mobileMenu = document.querySelector('.mobile-menu');\nconst closeBtn = document.querySelector('.mobile-menu-close');\nconst mobileNavLinks = document.querySelectorAll('.mobile-nav-link');\nconst desktopNavLinks = document.querySelectorAll('.nav-link');\nconst pageHeader = document.querySelector('.page-header');\n\nif (burgerBtn) {\n  burgerBtn.addEventListener('click', () => {\n    mobileMenu.classList.add('is-open');\n    document.body.style.overflow = 'hidden';\n  });\n}\n\nif (closeBtn) {\n  closeBtn.addEventListener('click', () => {\n    mobileMenu.classList.remove('is-open');\n    document.body.style.overflow = '';\n  });\n}\n\nfunction smoothScroll(targetId) {\n  const targetElement = document.querySelector(targetId);\n  if (targetElement) {\n    const headerHeight = pageHeader.offsetHeight;\n\n    const elementPosition =\n      targetElement.getBoundingClientRect().top + window.pageYOffset;\n    const offsetPosition = elementPosition - headerHeight;\n\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: 'smooth',\n    });\n  }\n}\n\ndesktopNavLinks.forEach(link => {\n  link.addEventListener('click', e => {\n    e.preventDefault();\n    const targetId = e.currentTarget.getAttribute('href');\n    smoothScroll(targetId);\n  });\n});\n\nmobileNavLinks.forEach(link => {\n  link.addEventListener('click', e => {\n    e.preventDefault();\n    const targetId = e.currentTarget.getAttribute('href');\n    smoothScroll(targetId);\n    mobileMenu.classList.remove('is-open');\n    document.body.style.overflow = '';\n  });\n});\n","export function truncateText(text, maxLength) {\n  if (typeof text !== 'string') {\n    return '';\n  }\n    return text.length > maxLength ? text.slice(0, maxLength) + '...' : text;\n}\n\n//  всі елементи з класом .artist-description\nconst descElements = document.querySelectorAll('.artist-description');\nconst maxLength = 67;\n\n// Для кожного елемента з цим класом обрізаєм текст\ndescElements.forEach(descElement => {\n  if (descElement) {\n    const truncatedText = truncateText(descElement.textContent, maxLength);\n    descElement.textContent = truncatedText;\n  }\n});","import { truncateText } from './artists';\n\nimport { loadMoreBtn } from '../main';\n\n\n\nconst loader = document.querySelector('.loader');\n\n// genre function\nexport function renderGenres(genreArray) {\n  return `\n    <ul class=\"artist-genre-list\">\n      ${genreArray.map(genre => `<li class=\"artist-genre-item\">${genre}</li>`).join('')}\n    </ul>\n  `;\n}\n\nexport function renderArtists(artists) {\n  return artists.map(artist => {\n    return `\n    <li class=\"artist-item\">\n          <img class=\"artist-item-img\" src=\"${artist.strArtistThumb}\" alt=\"${artist.strArtist}\">\n          ${renderGenres(artist.genres)}\n          <p class=\"artist-name\">${artist.strArtist}</p>\n          <p class=\"artist-description\">${truncateText(artist.strBiographyEN, 67)}</p>\n          <button type=\"button\" class=\"artist-learn-btn\" data-id=\"${artist._id}\">Learn More\n            <svg class=\"learn-btn-svg\">\n               <use href=\"/img/icons-svg.svg#icon-icon\"></use>\n            </svg>\n          </button>\n        </li>`;\n  }).join('')\n}\n\n// Показати лоадер\nexport function showLoader() {\n  loader.classList.add('is-active');\n  loader.classList.remove('is-hidden');\n}\n\n// Сховати лоадер\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n  loader.classList.remove('is-active');\n}\n\n// прибирає клас для відображення кнопки load more\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n  loadMoreBtn.classList.remove('is-active');\n};\n\n","document.addEventListener('DOMContentLoaded', () => {\n  const openModalBtn = document.querySelector('.artist-learn-btn');\n  const modalSection = document.querySelector('.container-modal');\n  const modalOverlay = modalSection.querySelector('.modal');\n  const modalContent = modalSection.querySelector('.container-modal-1');\n  const closeModalBtn = modalSection.querySelector('.modal-close-btn');\n  const loader = document.getElementById('modalLoader');\n\n  function handleEscKey(event) {\n    if (event.key === 'Escape') {\n      closeModal();\n    }\n  }\n\n  function handleOverlayClick(event) {\n    if (!modalContent.contains(event.target)) {\n      closeModal();\n    }\n  }\n\n  function openModal() {\n    modalSection.classList.add('is-open');\n    document.body.classList.add('modal-open');\n\n    loader.style.display = 'block';\n    modalContent.style.display = 'none';\n\n    setTimeout(() => {\n      loader.style.display = 'none';\n      modalContent.style.display = 'block';\n\n      closeModalBtn.addEventListener('click', closeModal);\n      document.addEventListener('keydown', handleEscKey);\n      modalOverlay.addEventListener('click', handleOverlayClick);\n    }, 1500); \n  }\n\n  function closeModal() {\n    modalSection.classList.remove('is-open');\n    document.body.classList.remove('modal-open');\n\n    loader.style.display = 'none';\n    modalContent.style.display = 'block';\n\n    closeModalBtn.removeEventListener('click', closeModal);\n    document.removeEventListener('keydown', handleEscKey);\n    modalOverlay.removeEventListener('click', handleOverlayClick);\n  }\n\n  \n  openModalBtn.addEventListener('click', openModal);\n\n});","import Swiper from 'swiper';\nimport 'swiper/css';\n\nimport './js/basicAPI';\n\nimport './js/header';\n\n\nimport './js/artists';\nimport './js/render-functions';\n\nimport './js/modal';\n\nimport './css/styles.css';\nimport { fetchArtists, LIMIT } from './js/basicAPI';\nimport {\n renderArtists,\n showLoader,\n hideLoader,\n hideLoadMoreButton,\n}\n from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst list = document.querySelector('.artist-list');\nexport const loadMoreBtn = document.querySelector('.artist-load-btn');\n\nlet page = 1;\nlet totalArtists = 0;\n\n// обробники\nloadMoreBtn.addEventListener('click', loadArtists);\ndocument.addEventListener('DOMContentLoaded', loadArtists);\n\nasync function loadArtists() {\n\n showLoader();\n\n try {\n  const fullDataFromAPI = await fetchArtists(page); // { artists: [], limit: \"8\", page: \"1\", totalArtists: 2224 }\n  const artists = fullDataFromAPI.artists;\n\n  // Оновлюємо загальну кількість артистів\n  totalArtists = fullDataFromAPI.totalArtists;\n\n  const totalLoaded = page * LIMIT;\n\n  if (totalLoaded >= totalArtists) {\n\n   hideLoadMoreButton();\n\n   iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n   });\n   return;\n  }\n\n  // Якщо artists неопределен або не є масивом, виводимо помилку\n  if (!artists || !Array.isArray(artists)) {\n   console.error('Error: fetched data is not an array or is undefined');\n   return;\n  }\n\n  if (artists.length === 0) {\n   hideLoadMoreButton();\n   return;\n  }\n\n  const markup = renderArtists(artists);\n  list.insertAdjacentHTML('beforeend', markup);\n\n  page++;\n } catch (error) {\n  console.error('Error loading artists:', error);\n  iziToast.error({\n   message: 'Something went wrong. Please try again later.',\n   position: 'topCenter',\n  });\n } finally {\n  hideLoader();\n\n  // плавний скрол\n  const card = document.querySelector('.artist-item');\n  if (card) {\n   const cardHeight = card.getBoundingClientRect().height;\n   window.scrollBy({\n    top: cardHeight,\n    behavior: 'smooth',\n   });\n  };\n\n }\n}\n\n//  При натисканні на кнопку Learn more - МОДАЛКА\n\nexport const artistList = document.querySelector('.artist-list');\n\nartistList.addEventListener('click', (e) => {\n  const learnMoreBtn = e.target.closest('.artist-learn-btn');\n  if (!learnMoreBtn) return;\n\n  const artistId = learnMoreBtn.dataset.id;  // id\n  console.log( 'ID виконавця:', artistId);\n\n  // -----!!!Тут треба відкрти модалку!!!---\n});\n\n"],"names":["BASE_URL","LIMIT","fetchArtists","page","response","axios","error","burgerBtn","mobileMenu","closeBtn","mobileNavLinks","desktopNavLinks","pageHeader","smoothScroll","targetId","targetElement","headerHeight","offsetPosition","link","truncateText","text","maxLength","descElements","descElement","truncatedText","loader","renderGenres","genreArray","genre","renderArtists","artists","artist","showLoader","hideLoader","hideLoadMoreButton","loadMoreBtn","openModalBtn","modalSection","modalOverlay","modalContent","closeModalBtn","handleEscKey","event","closeModal","handleOverlayClick","openModal","list","totalArtists","loadArtists","fullDataFromAPI","iziToast","markup","card","cardHeight","artistList","e","learnMoreBtn","artistId"],"mappings":"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"}